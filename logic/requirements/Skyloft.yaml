# this logic assumes, that you can always reach outside skyloft

Upper Skyloft:
  hint-region: Upper Skyloft
  exits:
    Knight Academy Upper Right Door: Nothing
    Knight Academy Upper Left Door: Nothing
    Knight Academy Lower Right Door: Day
    Knight Academy Lower Left Door: Day
    Knight Academy Chimney Entrance: Clawshots
    Sparring Hall Right Door: Nothing
    Sparring Hall Left Door: Nothing
    Inside the Statue of the Goddess: Nothing
    Central Skyloft: Nothing
  locations:
    Owlan's Gift: Day
    Chest below Goddess Statue: Nothing
    600 Points in Pumpkin Pull: Bow & Day
    Rescue Remlit above Knight Academy: Day
    Stamina Fruit near Upper Academy Gates: Nothing
    Stamina Fruit near Lower Academy Gates: Nothing
    Stamina Fruit near Sparring Hall: Nothing
    Stamina Fruit near Goddess Statue: Nothing
    Slingshot Left Lamp outside Upper Academy Doors: Slingshot
    Slingshot Right Lamp outside Upper Academy Doors: Slingshot
    Slingshot Left Lamp outside Sparring Hall Doors: Slingshot
    Slingshot Right Lamp outside Sparring Hall Doors: Slingshot
    Ring Knight Academy Bell: Distance Activator | (Bomb Bag & Bomb Throws Trick)

Knight Academy:
  hint-region: Upper Skyloft
  can-sleep: true
  exits:
    Upper Right Door: Nothing
    Upper Left Door: Nothing
    Lower Right Door: Day
    Lower Left Door: Day
  locations:
    Fledge's Gift: Nothing
    Crystal in Knight Academy Plant: Night
    Start Owlan's Quest: Faron - Faron Woods - All Kikwis Saved
    Deliver Kikwi to Owlan: Faron - Faron Woods - Retrieve Oolo & Day
    Knock on Toilet Door: Goddess's Harp & Night
    Item from Cawlin: Day
    Deliver Cawlin's Letter: Cawlin's Letter & Day
    Help Fledge Workout: Bazaar - Endurance Potion & Night
    Bonk Classroom Bookshelf: Nothing
    Bonk Headmaster Gaepora's Bookshelf: Nothing
    Fledge's Closet: Nothing
    Groose's Closet: Nothing
    Owlan's Closet: Nothing
    Karane's Closet: Nothing

  Link's Room:
    can-sleep: true
    entrance: Nothing
    exits:
      Start Entrance: Impossible
      Knight Academy: Nothing
    locations:
      Crystal in Link's Room: Night
      Link's Closet: Nothing

  Zelda's Room:
    entrance:
      Unlocked Zelda's Room
    exits:
      Chimney: Impossible
      Knight Academy: Nothing
    locations:
      Unlocked Zelda's Room: Nothing
      Crystal in Zelda's Room: Night
      Zelda's Closet: Nothing
      Rupee in Chimney Crawlspace 1: Nothing
      Rupee in Chimney Crawlspace 2: Nothing
      Rupee in Chimney Crawlspace 3: Nothing
      Rupee in Chimney Crawlspace 4: Nothing
      Rupee in Chimney Crawlspace 5: Nothing

Sparring Hall:
  hint-region: Upper Skyloft
  exits:
    Right Door: Nothing
    Left Door: Nothing
  locations:
    Crystal on Roof Beam: Beetle & Night
    Chest in Back Room: Nothing
    Delivered Hot Soup: Lumpy Pumpkin - Start Hot Soup Delivery

Inside the Statue of the Goddess:
  hint-region: Upper Skyloft
  exits:
    Exit: Nothing
  locations:
    First Goddess Sword Item: Nothing
    Second Goddess Sword Item: Nothing

Central Skyloft:
  hint-region: Central Skyloft
  exits:
    Exit to Beedle's Airshop: Day & (Distance Activator | (Beedle's Airshop With Bombs Trick & Bomb Bag))
    Bazaar North: Day
    Bazaar West: Day
    Bazaar South: Day
    Trial Gate: Open Trial Gate
    Orielle and Parrow's House: Nothing
    Peatrice's House: Nothing
    Wryna's House: Nothing
    Piper's House: Nothing
    Exit to Sky: Day
    Skyloft - Upper Skyloft: Nothing
    Skyloft Village: Nothing
    # omit SoT here intentionally, see the comment on that
    # area for an explanation
    Near Temple Entrance: Day & Clawshots
    Waterfall Island: Clawshots
    Waterfall Cave Upper: Open Cave Entrance
  locations:
    Crystal between Wooden Planks: Night
    Crystal on West Cliff: Night
    Crystal on Light Tower: Night
    Goddess Chest on West Cliff Island: Faron - Goddess Cube on West Great Tree near Exit
    Parrow's Gift: The Sky - Talk to Orielle & Day
    Parrow's Gratitude: The Sky - Save Orielle & Day
    Chest in Shed: Water Dragon's Scale
    Goddess Chest in Shed: Water Dragon's Scale & Eldin - Goddess Cube on Sand Slide
    Bird Nest - Item in Bird's Nest:
      Baby Rattle from Beedle's Airshop Trick & Day & Distance Activator & Gust Bellows & (Beetle | Whip)
    Open Trial Gate: Goddess's Harp & Song of the Hero
    General - Can Collect Water: Nothing
    Waterfall Cave Crystals from above: Beetle
    Crystal on Waterfall Island from the ground: Quick Beetle
    Past Waterfall Cave - Crystal after Waterfall Cave: Night & Waterfall Cave Crystals from above
    Past Waterfall Cave - Crystal in Loftwing Prison: Night & Waterfall Cave Crystals from above
    Waterfall Island - Crystal on Waterfall Island: Night & Crystal on Waterfall Island from the ground
    Open Cave Entrance: Sword | Bomb Bag
    Bonk Tree before Lower Academy Stairs 1: Nothing
    Bonk Tree before Lower Academy Stairs 2: Nothing
    Bonk Tree before Lower Academy Stairs 3: Nothing
    Slingshot Left Lamp outside North Bazaar Entrance: Slingshot
    Slingshot Right Lamp outside North Bazaar Entrance: Slingshot
    Slingshot Left Lamp outside South Bazaar Entrance: Slingshot
    Slingshot Right Lamp outside South Bazaar Entrance: Slingshot
    Blow Red Flag South of the Bazaar: Gust Bellows
    Blow Purple Flag South of the Bazaar: Gust Bellows
    Bonk Tree Southeast of the Bazaar: Nothing
    Bonk Tree Left of Sky Keep Statue: Nothing
    Bonk Tree Right of Sky Keep Statue: Nothing
    North Rupee in Bird's Nest: Beetle
    South Rupee in Bird's Nest: Beetle
    East Rupee in Bird's Nest: Beetle
    West Rupee in Bird's Nest: Beetle
    Stamina Fruit between Wooden Planks: Nothing
    Stamina Fruit near Wryna's House: Nothing
    Stamina Fruit near River: Nothing
    Stamina Fruit near Orielle and Parrow's House: Nothing
    Stamina Fruit near Bazaar: Nothing
    Stamina Fruit near Plaza: Nothing

  Bird Nest:
    exits:
      Central Skyloft: Nothing
    locations:
      Item in Bird's Nest: Gust Bellows
      Central Skyloft - North Rupee in Bird's Nest: Nothing
      Central Skyloft - South Rupee in Bird's Nest: Nothing
      Central Skyloft - East Rupee in Bird's Nest: Nothing
      Central Skyloft - West Rupee in Bird's Nest: Nothing
  
  Orielle and Parrow's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Crystal in Orielle and Parrow's House: Nothing
      Orielle and Parrow's Closet: Nothing
      Central Skyloft - Parrow's Gift: The Sky - Talk to Orielle & Night
      Central Skyloft - Parrow's Gratitude: The Sky - Save Orielle & Night

  Peatrice's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Peatrice's Love: Bazaar - Talk to Peatrice & Night
      Peater's Closet: Nothing
      Peatrice's Closet: Nothing

  Wryna's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Wryna's Gratitude: Nothing
      Wryna's Closet: Nothing

  Piper's House:
    can-sleep: true
    exits:
      Exit: Nothing

  # Pretend this area is reachable without SoT and instead require it
  # for the exit to SK
  # the reason for this is twofold:
  # - only requiring SoT for the actual exit doesn't trip up the algorithm that
  #   separates progress items from nonprogress
  # - When coming from SK in ER, when it hasn't been opened yet *doesn't* place
  #   you on the platform near the entrance (cause it doesn't exist), so you always need SoT to enter SK
  Near Temple Entrance:
    allowed-time-of-day: DayOnly
    exits:
      Exit to Sky Keep: Stone of Trials
      Central Skyloft: Clawshots

  Waterfall Island:
    exits:
      Central Skyloft: Nothing
      Skyloft Village: Nothing
      Central Skyloft - Bird Nest: Nothing
    locations:
      Crystal on Waterfall Island: Night
      Goddess Chest on Waterfall Island: Lanayru - Goddess Cube in Pirate Stronghold
      Goddess Chest on Island near Waterfall: Faron - Goddess Cube in Lake Floria
      Gossip Stone on Waterfall Island: Nothing

  Waterfall Cave:
    exits:
      Upper Exit: Nothing
      Lower Exit: Nothing
    locations:
      Waterfall Cave First Chest: Nothing
      Waterfall Cave Second Chest: Nothing
      First Rupee in Waterfall Cave Crawlspace: Nothing
      Second Rupee in Waterfall Cave Crawlspace: Nothing

  Past Waterfall Cave:
    exits:
      Waterfall Cave Lower Exit: Nothing
      Central Skyloft - Exit to Sky: Day
    locations:
      Crystal after Waterfall Cave: Night
      Crystal in Loftwing Prison: Night

Bazaar:
  hint-region: Central Skyloft
  allowed-time-of-day: DayOnly
  exits:
    North Exit: Nothing
    West Exit: Nothing
    South Exit: Nothing
  locations:
    Potion Lady's Gift: Nothing
    # Repair Gondo's Junk: Ancient Flower Farming
    Goddess Chest: Lanayru - Goddess Cube in Ancient Harbour
    Endurance Potion: Bottle & Lanayru - Raise Lanayru Mining Facility
    Talk to Peatrice: Nothing
    Item Check Access: Nothing

  Gondo's Upgrades:
    entrance: Gondo Upgrades On option
    exits:
      Bazaar: Nothing
    locations:
      Upgrade to Quick Beetle:
        $ Hook Beetle &
        Faron - Deep Woods - Hornet Larvae Farming &
        General - Ancient Flower Farming &
        The Sky - Clean Cut Minigame # Golden Skull farming
      Upgrade to Tough Beetle:
        $ Quick Beetle &
        Faron - Faron Woods - Amber Relic Farming &
        General - Ancient Flower Farming &
        The Sky - Clean Cut Minigame # Goddess Plumes / Blue Bird Feathers farming

The Goddess's Silent Realm:
  hint-region: The Goddess's Silent Realm
  exits:
    Exit: Nothing
  locations:
    Collect all Tears Reward: Nothing
    Stamina Fruit on Knight Academy Ledge: Nothing
    # Relic 1: Nothing
    # Relic 2: Nothing
    # Relic 3: Nothing
    # Relic 4: Nothing
    # Relic 5: Nothing
    # Relic 6: Nothing
    # Relic 7: Nothing
    # Relic 8: Nothing
    # Relic 9: Nothing
    # Relic 10: Nothing

Skyloft Village:
  hint-region: Skyloft Village
  exits:
    Central Skyloft: Nothing
    Central Skyloft - Past Waterfall Cave: Waterfall Cave Jump Trick & Day
    Bertie's House: Nothing
    Sparrot's House: Nothing
    Mallara's House: Nothing
    Gondo's House: Nothing
    Rupin's House: Nothing
    Batreaux's House: Opened Shed | Gravestone Jump Trick
    Central Skyloft - Exit to Sky: Day
  locations:
    Bonk Tree near River: Nothing
    Stamina Fruit above Mallara's House: Nothing
    Crystal near Pumpkin Patch: Night
    Opened Shed: Night

  Bertie's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Deliver Rattle to Bertie: Baby Rattle & Night
      Luv and Bertie's Closet: Nothing

  Sparrot's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Start Sparrot's Quest: Nothing
      Deliver Crystal Ball to Sparrot: Eldin - Retrieve Crystal Ball
      Sparrot's Closet: Nothing
      Bonk Sparrot's Valuables: Nothing

  Mallara's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Clean Mallara's House: Gust Bellows
      Mallara's Closet: Nothing

  Gondo's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Gondo's Closet: Nothing

  Rupin's House:
    can-sleep: true
    exits:
      Exit: Nothing
    locations:
      Rupin's Closet: Nothing

Batreaux:
  hint-region: Batreaux's House
  exits:
    Exit: Nothing
  locations:
    5 Gratitude Crystals Reward: 5 Gratitude Crystals
    10 Gratitude Crystals Reward: 10 Gratitude Crystals
    30 Gratitude Crystals Reward: 30 Gratitude Crystals
    30 Gratitude Crystals Reward Chest: 30 Gratitude Crystals
    40 Gratitude Crystals Reward: 40 Gratitude Crystals
    50 Gratitude Crystals Reward: 50 Gratitude Crystals
    70 Crystals: 70 Gratitude Crystals
    70 Crystals Second Reward: 70 Gratitude Crystals
    80 Crystals: 80 Gratitude Crystals

# BEEDLES SHOP
Beedle's Airshop:
  toplevel-alias: Beedle
  hint-region: Beedle's Airshop
  can-sleep: true
  exits:
    Night Exit: Night
    Day Exit: Day

  Stall:
    entrance: Day
    exits:
      Beedle's Airshop: Nothing
    locations:
      # We don't want the pouch extensions to be the logical access to the pouch
      300 Rupee Item: Can Afford 300 Rupees & (Pouch | Randomized Beedle option)
      600 Rupee Item: Can Afford 600 Rupees
      1200 Rupee Item: Can Afford 1200 Rupees
      800 Rupee Item: Can Afford 800 Rupees
      1600 Rupee Item: Can Afford 1600 Rupees
      First 100 Rupee Item: Can Afford 100 Rupees
      Second 100 Rupee Item: Can Afford 100 Rupees
      # To reduce necessary rupee-farming at the start, the third item logically needs an efficient rupee-farming method
      Third 100 Rupee Item: Can Afford 100 Rupees & Can Medium Rupee Farm
      50 Rupee Item: Can Afford 50 Rupees
      1000 Rupee Item: Can Afford 1000 Rupees
